{"version":3,"file":"cart.js","mappings":"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","sources":["webpack://itay-upsell-and-cart-plugin/./src/user/js/cart.js"],"sourcesContent":["class Cart {\r\n  #form;\r\n  #datePicker;\r\n  #timePicker;\r\n  #userTime;\r\n  #siteTimes;\r\n  #todaySelected;\r\n  #instantiated;\r\n  #data = {\r\n    date: undefined,\r\n    time: undefined,\r\n  };\r\n  constructor() {\r\n    jQuery(document).ajaxStop(() => {\r\n      if (this.#instantiated) return;\r\n      this.#instantiated = true;\r\n      this.initializeVariables();\r\n      console.log(\"hello\");\r\n      this.events();\r\n    });\r\n  }\r\n  events() {\r\n    // form submit\r\n    this.#form.on(\"submit\", (e) => {\r\n      e.preventDefault();\r\n      this.submitForm();\r\n    });\r\n\r\n    // Date change\r\n    this.#datePicker.datepicker(\r\n      \"option\",\r\n      \"onSelect\",\r\n      function (dateText, inst) {\r\n        // update the date property.\r\n        this.#data.date = new Date(dateText).getDate();\r\n        const currentDate = new Date().getDate();\r\n        this.#todaySelected = this.#data.date == currentDate ? true : false;\r\n        console.log(this.#todaySelected);\r\n        // show time selector.\r\n        this.showTimeSelector();\r\n      }.bind(this)\r\n    );\r\n\r\n    //Time selected\r\n    this.#timePicker.change(function () {\r\n      alert(\"changed\");\r\n    });\r\n  }\r\n\r\n  showTimeSelector() {\r\n    if (this.#timePicker.hasClass(\"hidden\")) {\r\n      this.#form.find(\"#arrival-time-label\").removeClass(\"hidden\");\r\n      this.#timePicker.removeClass(\"hidden\");\r\n    }\r\n    this.generateTimes();\r\n  }\r\n\r\n  generateTimes() {\r\n    this.#userTime = new Date().toLocaleTimeString(\"he-IL\", {\r\n      hour12: false,\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n    });\r\n    this.#timePicker[0].innerHTML = \"\";\r\n    for (const [start, end] of Object.entries(this.#siteTimes)) {\r\n      if (this.#todaySelected) {\r\n        if (this.#userTime < start) {\r\n          this.#timePicker[0].innerHTML += `<option>${start}:${end}</option>`;\r\n        }\r\n      } else {\r\n        this.#timePicker[0].innerHTML += `<option>${start}:${end}</option>`;\r\n      }\r\n    }\r\n  }\r\n  submitForm() {\r\n    //rendering a spinner\r\n\r\n    const data = {\r\n      date: this.#data.date,\r\n      time: this.#userTime,\r\n      nonce: this.#form.find(\"#iucp_date_time\").val(),\r\n    };\r\n    const url = this.#form.attr(\"data-url\");\r\n\r\n    const formData = new FormData(this.#form[0]);\r\n    jQuery.ajax({\r\n      type: \"POST\",\r\n      url: url,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      dataType: \"json\",\r\n      success: function (data, textStatus, jqXHR) {\r\n        //process data\r\n        console.log(data);\r\n      },\r\n      error: function (data, textStatus, jqXHR) {\r\n        //process error msg\r\n        console.log(data);\r\n      },\r\n    });\r\n  }\r\n  createDateObject() {}\r\n\r\n  initializeVariables() {\r\n    this.#siteTimes = iucpTimes;\r\n\r\n    this.#form = jQuery(\"#iucp_form\");\r\n\r\n    this.#datePicker = jQuery(\"#iucp_datepicker\").datepicker({\r\n      dateFormat: \"mm-dd-yy\",\r\n      minDate: 0,\r\n      beforeShowDay: (date) => {\r\n        return [\r\n          date.getDay() == 0 ||\r\n            date.getDay() == 1 ||\r\n            date.getDay() == 2 ||\r\n            date.getDay() == 3 ||\r\n            date.getDay() == 4 ||\r\n            date.getDay() == 5,\r\n        ];\r\n      },\r\n    });\r\n\r\n    this.#timePicker = jQuery(\"#iucp_address_arrival_time\");\r\n  }\r\n}\r\n\r\nconst iucpCart = new Cart();\r\n\r\n// class Cart {\r\n//   #cartToggled = false;\r\n//   #cartBtn;\r\n//   #cartContainer;\r\n//   cartState = {\r\n//     products: [],\r\n//   };\r\n\r\n//   constructor() {\r\n//     this.events();\r\n//   }\r\n//   events() {\r\n//     window.addEventListener(\"DOMContentLoaded\", () => {\r\n//       this.initializeVariables();\r\n\r\n//       this.#cartBtn.addEventListener(\"click\", (e) => {\r\n//         this.toggleCart();\r\n//       });\r\n//     });\r\n//   }\r\n//   initializeVariables() {\r\n//     this.#cartContainer = document.querySelector(\r\n//       \".iucp-cart-feature-container\"\r\n//     );\r\n//     this.#cartBtn = document.querySelector(\r\n//       \".iucp-cart-feature-toggle-cart-button\"\r\n//     );\r\n//   }\r\n//   toggleCart() {\r\n//     this.#cartContainer.classList.toggle(\"inactive\");\r\n//     this.#cartToggled = this.cartToggled ? false : true;\r\n//   }\r\n// }\r\n// const cart = new Cart();\r\n// console.log(\"test\");\r\n"],"names":["Cart","form","datePicker","timePicker","userTime","siteTimes","todaySelected","instantiated","data","date","undefined","time","constructor","jQuery","document","ajaxStop","initializeVariables","console","log","events","on","e","preventDefault","submitForm","datepicker","dateText","inst","Date","getDate","currentDate","showTimeSelector","bind","change","alert","hasClass","find","removeClass","generateTimes","toLocaleTimeString","hour12","hour","minute","innerHTML","start","end","Object","entries","nonce","val","url","attr","formData","FormData","ajax","type","processData","contentType","dataType","success","textStatus","jqXHR","error","createDateObject","iucpTimes","dateFormat","minDate","beforeShowDay","getDay","iucpCart"],"sourceRoot":""}